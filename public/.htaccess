# --- Content types ---
AddType application/json              .json
AddType application/manifest+json     .webmanifest

# --- Service worker must always revalidate ---
<FilesMatch "^sw\.js$">
  Header set Cache-Control "no-cache, no-store, must-revalidate, max-age=0"
  Header set Service-Worker-Allowed "/"
</FilesMatch>

# --- Data manifest: force fresh check each load ---
<FilesMatch "^data/manifest\.json$">
  Header set Cache-Control "no-cache, no-store, must-revalidate, max-age=0"
</FilesMatch>

# --- Static JSON payloads: long-lived (SW fetch uses cache:'no-store' anyway) ---
<FilesMatch "^data/.*\.json$">
  Header set Cache-Control "public, max-age=31536000, immutable"
</FilesMatch>

# --- Basic security hardening ---
Header always set X-Content-Type-Options "nosniff"
Header always set Referrer-Policy "strict-origin-when-cross-origin"
Header always set X-Frame-Options "SAMEORIGIN"
Header always set Permissions-Policy "geolocation=(), microphone=(), camera=()"
